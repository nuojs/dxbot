!function(e){function t(e){return ee[e]}function r(e){let r=t("precision");return r?parseFloat(e.toPrecision(r)):e}function s(e){re.reverseInputs(e);var t=new se(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function n(e){re.reverseInputs(e);var t=new ne(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function i(e){re.reverseInputs(e);var t=new ie(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function l(e){re.reverseInputs(e);var t=new le(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function o(e){re.reverseInputs(e);var t=new oe(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function a(e){re.reverseInputs(e);var t=new ae(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function u(e){re.reverseInputs(e);var t=new ue(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function h(e){re.reverseInputs(e);var t=new he(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function c(e){re.reverseInputs(e);var t=new ce(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function v(e){re.reverseInputs(e);var t=new ve(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function d(e){re.reverseInputs(e);var t=new we(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function p(e){re.reverseInputs(e);var t=new fe(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function g(e){re.reverseInputs(e);var t=new me(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function w(e){re.reverseInputs(e);var t=new xe(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function f(e){re.reverseInputs(e);var t=new Ie(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function m(e){re.reverseInputs(e);var t=new ye(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function x(e){re.reverseInputs(e);var t=new be(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function I(e){re.reverseInputs(e);var t=new Pe(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function y(e){re.reverseInputs(e);var t=new _e(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function b(e){re.reverseInputs(e);var t=new Ve(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function P(e){re.reverseInputs(e);var t=new Ce(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function _(e){re.reverseInputs(e);var t=new qe(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function V(e){re.reverseInputs(e);var t=new Ee(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function C(e){re.reverseInputs(e);var t=new ke(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function q(e){re.reverseInputs(e);var t=new Se(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function E(e,t,r,s){return e<=r&&t>=r||r<=e&&s>=e}function k(e){re.reverseInputs(e);var t=new Ae(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function S(e){re.reverseInputs(e);var t=new He(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function A(e){re.reverseInputs(e);var t=new ze(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function B(e){re.reverseInputs(e);var t=new Le(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function H(e){re.reverseInputs(e);var t=new Me(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function z(e){re.reverseInputs(e);var t=new Te(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function L(e){re.reverseInputs(e);var t=new De(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),re.reverseInputs(e),t}function M(e){re.reverseInputs(e);var t=new je(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),re.reverseInputs(e),t}function T(e){return(new Ye).hasPattern(e)}function D(e){return(new Ze).hasPattern(e)}function j(e){return(new $e).hasPattern(e)}function R(e){return(new et).hasPattern(e)}function F(e){re.reverseInputs(e);var t=new Ct(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function N(e){re.reverseInputs(e);var t=new qt(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function O(e){re.reverseInputs(e);var t=new Et(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function U(e){re.reverseInputs(e);var t=new kt(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function W(e){re.reverseInputs(e);var t=new St(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}function K(){return["sma","ema","wma","wema","macd","rsi","bollingerbands","adx","atr","truerange","roc","kst","psar","stochastic","williamsr","adl","obv","trix","cci","awesomeoscillator","forceindex","vwap","volumeprofile","renko","heikinashi","stochasticrsi","mfi","averagegain","averageloss","highest","lowest","sum","FixedSizeLinkedList","sd","bullish","bearish","abandonedbaby","doji","bearishengulfingpattern","bullishengulfingpattern","darkcloudcover","downsidetasukigap","dragonflydoji","gravestonedoji","bullishharami","bearishharami","bullishharamicross","bearishharamicross","eveningdojistar","eveningstar","morningdojistar","morningstar","bullishmarubozu","bearishmarubozu","piercingline","bullishspinningtop","bearishspinningtop","threeblackcrows","threewhitesoldiers","bullishhammerstick","bearishhammerstick","bullishinvertedhammerstick","bearishinvertedhammerstick","hammerpattern","hammerpatternunconfirmed","hangingman","hangingmanunconfirmed","shootingstar","shootingstarunconfirmed","tweezertop","tweezerbottom","ichimokucloud","keltnerchannels","chandelierexit","crossup","crossdown","crossover"]}var G=Math.min,X=Math.max,J=Math.abs;class Q{constructor(e,t,r){this.next=r,r&&(r.prev=this),this.prev=t,t&&(t.next=this),this.data=e}}class Y{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new Q(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new Q(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||2>this._length?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class Z extends Y{constructor(e,t,r,s){if(super(),this.size=e,this.maintainHigh=t,this.maintainLow=r,this.maintainSum=s,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||"number"!=typeof e)throw"Size required and should be a number.";this._push=this.push,this.push=function(e){this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum-=this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum+=e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class ${constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}let ee={};class te{}class re{constructor(e){this.format=e.format||r}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class se extends re{constructor(e){super(e),this.period=e.period,this.price=e.values,this.generator=function*(e){var t,r=new Y,s=0,n=1,i=yield;for(r.push(0);;)n<e?(n++,r.push(i),s+=i):(t=(s=s-r.shift()+i)/e,r.push(i)),i=yield t}(this.period),this.generator.next(),this.result=[],this.price.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}se.calculate=s;class ne extends re{constructor(e){super(e);var t,r=e.period,s=e.values;this.result=[],t=new se({period:r,values:[]}),this.generator=function*(){for(var e,s=yield;;)null!=e&&void 0!==s?(e=2/(r+1)*(s-e)+e,s=yield e):(s=yield,(e=t.nextValue(s))&&(s=yield e))}(),this.generator.next(),this.generator.next(),s.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}ne.calculate=n;class ie extends re{constructor(e){super(e);var t=e.period,r=e.values;this.result=[],this.generator=function*(){for(let r=new Y;;)if(r.length<t)r.push(yield);else{r.resetCursor();let s=0;for(let e=1;e<=t;e++)s+=r.next()*e/(t*(t+1)/2);var e=yield s;r.shift(),r.push(e)}}(),this.generator.next(),r.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}ie.calculate=i;class le extends re{constructor(e){super(e);var t,r=e.period,s=e.values;this.result=[],t=new se({period:r,values:[]}),this.generator=function*(){for(var e,s=yield;;)null!=e&&void 0!==s?(e=1/r*(s-e)+e,s=yield e):(s=yield,void 0!==(e=t.nextValue(s))&&(s=yield e))}(),this.generator.next(),this.generator.next(),s.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}le.calculate=l;class oe extends re{constructor(e){super(e);var t=e.SimpleMAOscillator?se:ne,r=e.SimpleMASignal?se:ne,s=new t({period:e.fastPeriod,values:[],format:e=>e}),n=new t({period:e.slowPeriod,values:[],format:e=>e}),i=new r({period:e.signalPeriod,values:[],format:e=>e}),l=this.format;this.result=[],this.generator=function*(){for(var t,r,o,a,u,h,c=0;;)c<e.slowPeriod?(t=yield,u=s.nextValue(t),h=n.nextValue(t),c++):(u&&h&&(r=u-h,o=i.nextValue(r)),a=r-o,t=yield{MACD:l(r),signal:o?l(o):void 0,histogram:isNaN(a)?void 0:l(a)},u=s.nextValue(t),h=n.nextValue(t))}(),this.generator.next(),e.values.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}oe.calculate=o;class ae extends re{constructor(e){super(e);let t=e.values,r=e.period,s=this.format;this.generator=function*(e){var t,r,n=yield,i=1,l=0,o=n;for(n=yield;;)0<(r=0<(r=n-o)?r:0)&&(l+=r),i<e?i++:t=null==t?l/e:(t*(e-1)+r)/e,o=n,t=void 0===t?void 0:s(t),n=yield t}(r),this.generator.next(),this.result=[],t.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}ae.calculate=a;class ue extends re{constructor(e){super(e);let t=e.values,r=e.period,s=this.format;this.generator=function*(e){var t,r,n=yield,i=1,l=0,o=n;for(n=yield;;)0<(r=0<(r=o-n)?r:0)&&(l+=r),i<e?i++:t=null==t?l/e:(t*(e-1)+r)/e,o=n,t=void 0===t?void 0:s(t),n=yield t}(r),this.generator.next(),this.result=[],t.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}ue.calculate=u;class he extends re{constructor(e){super(e);var t=e.period,r=e.values,s=new ae({period:t,values:[]}),n=new ue({period:t,values:[]});this.generator=function*(){for(var e,t,r,i,l=yield;;)e=s.nextValue(l),t=n.nextValue(l),void 0!==e&&void 0!==t&&(0===t?i=100:0===e?i=0:(r=e/t,r=isNaN(r)?0:r,i=parseFloat((100-100/(1+r)).toFixed(2)))),l=yield i}(),this.generator.next(),this.result=[],r.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}he.calculate=h;class ce extends re{constructor(e){super(e);var t=e.period,r=e.values,s=new se({period:t,values:[],format:e=>e});this.result=[],this.generator=function*(){var e,r,n,i=new Z(t);for(e=yield;;){if(i.push(e),r=s.nextValue(e)){let e=0;for(let t of i.iterator())e+=Math.pow(t-r,2);n=Math.sqrt(e/t)}e=yield n}}(),this.generator.next(),r.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}ce.calculate=c;class ve extends re{constructor(e){super(e);var t,r,s=e.period,n=e.values,i=e.stdDev,l=this.format;this.result=[],t=new se({period:s,values:[],format:e=>e}),r=new ce({period:s,values:[],format:e=>e}),this.generator=function*(){var e,s,n,o;for(s=yield;;){if(n=t.nextValue(s),o=r.nextValue(s),n){let t=l(n),r=l(n+o*i),a=l(n-o*i);e={middle:t,upper:r,lower:a,pb:l((s-a)/(r-a))}}s=yield e}}(),this.generator.next(),n.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}ve.calculate=v;class de extends re{constructor(e){super(e),this.period=e.period,this.price=e.values,this.generator=function*(e){new Y;for(var t=0,r=1,s=yield,n=0;;)r<e?(r++,t+=s,n=void 0):r==e?(r++,n=t+=s):n=n-n/e+s,s=yield n}(this.period),this.generator.next(),this.result=[],this.price.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}de.calculate=function(e){re.reverseInputs(e);var t=new de(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t};class pe extends re{constructor(e){super(e);var t=e.low,r=e.high,s=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let n=r.high-t.high,i=t.low-r.low;e=s(i>n&&0<i?i:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach(((e,s)=>{var n=this.generator.next({high:r[s],low:t[s]});void 0!==n.value&&this.result.push(n.value)}))}static calculate(e){re.reverseInputs(e);var t=new pe(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class ge extends re{constructor(e){super(e);var t=e.low,r=e.high,s=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let n=r.high-t.high,i=t.low-r.low;e=s(n>i&&0<n?n:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach(((e,s)=>{var n=this.generator.next({high:r[s],low:t[s]});void 0!==n.value&&this.result.push(n.value)}))}static calculate(e){re.reverseInputs(e);var t=new ge(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class we extends re{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;)null==e&&(e=r.close,r=yield t),t=X(r.high-r.low,isNaN(J(r.high-e))?0:J(r.high-e),isNaN(J(r.low-e))?0:J(r.low-e)),e=r.close,null!=t&&(t=n(t)),r=yield t}(),this.generator.next(),t.forEach(((e,n)=>{var i=this.generator.next({high:r[n],low:t[n],close:s[n]});null!=i.value&&this.result.push(i.value)}))}nextValue(e){return this.generator.next(e).value}}we.calculate=d;class fe extends re{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.period,i=this.format,l=new ge({high:[],low:[]}),o=new pe({high:[],low:[]}),a=new de({period:n,values:[],format:e=>e}),u=new de({period:n,values:[],format:e=>e}),h=new de({period:n,values:[],format:e=>e}),c=new le({period:n,values:[],format:e=>e}),v=new we({low:[],high:[],close:[]});if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){var e,t,r,s,n=yield;for(0,0,0;;){let i=v.nextValue(n),d=l.nextValue(n),p=o.nextValue(n);if(void 0===i){n=yield;continue}let g=h.nextValue(i),w=a.nextValue(d),f=u.nextValue(p);if(null!=g&&null!=w&&null!=f){r=J((e=100*w/g)-(t=100*f/g))/(e+t)*100,s=c.nextValue(r)}n=yield{adx:s,pdi:e,mdi:t}}}(),this.generator.next(),t.forEach(((e,n)=>{var l=this.generator.next({high:r[n],low:t[n],close:s[n]});null!=l.value&&null!=l.value.adx&&this.result.push({adx:i(l.value.adx),pdi:i(l.value.pdi),mdi:i(l.value.mdi)})}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t&&null!=t.adx)return{adx:this.format(t.adx),pdi:this.format(t.pdi),mdi:this.format(t.mdi)}}}fe.calculate=p;class me extends re{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.period,i=this.format;if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";var l=new we({low:[],high:[],close:[]}),o=new le({period:n,values:[],format:e=>e});this.result=[],this.generator=function*(){for(var e,t,r=yield;;)e=void 0===(t=l.nextValue({low:r.low,high:r.high,close:r.close}))?void 0:o.nextValue(t),r=yield e}(),this.generator.next(),t.forEach(((e,n)=>{var l=this.generator.next({high:r[n],low:t[n],close:s[n]});void 0!==l.value&&this.result.push(i(l.value))}))}nextValue(e){return this.generator.next(e).value}}me.calculate=g;class xe extends re{constructor(e){super(e);var t=e.period,r=e.values;this.result=[],this.generator=function*(){let e=1;for(var r,s=new Z(t),n=yield;;)s.push(n),e<t?e++:r=(n-s.lastShift)/s.lastShift*100,n=yield r}(),this.generator.next(),r.forEach((e=>{var t=this.generator.next(e);null==t.value||isNaN(t.value)||this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value&&!isNaN(t.value))return this.format(t.value)}}xe.calculate=w;class Ie extends re{constructor(e){super(e);let t=e.values,r=e.ROCPer1,s=e.ROCPer2,n=e.ROCPer3,i=e.ROCPer4,l=e.SMAROCPer1,o=e.SMAROCPer2,a=e.SMAROCPer3,u=e.SMAROCPer4,h=e.signalPeriod,c=new xe({period:r,values:[]}),v=new xe({period:s,values:[]}),d=new xe({period:n,values:[]}),p=new xe({period:i,values:[]}),g=new se({period:l,values:[],format:e=>e}),w=new se({period:o,values:[],format:e=>e}),f=new se({period:a,values:[],format:e=>e}),m=new se({period:u,values:[],format:e=>e}),x=new se({period:h,values:[],format:e=>e});var I=this.format;this.result=[];let y=X(r+l,s+o,n+a,i+u);this.generator=function*(){for(let e,t,r,s,n,i,l,o=1,a=yield;;){let u=c.nextValue(a),h=v.nextValue(a),b=d.nextValue(a),P=p.nextValue(a);t=void 0===u?void 0:g.nextValue(u),r=void 0===h?void 0:w.nextValue(h),s=void 0===b?void 0:f.nextValue(b),n=void 0===P?void 0:m.nextValue(P),o<y?o++:e=1*t+2*r+3*s+4*n,i=void 0===e?void 0:x.nextValue(e),l=void 0===e?void 0:{kst:I(e),signal:i?I(i):void 0},a=yield l}}(),this.generator.next(),t.forEach((e=>{let t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){let t=this.generator.next(e);if(null!=t.value)return t.value}}Ie.calculate=f;class ye extends re{constructor(e){super(e);let t=e.high||[],r=e.low||[];this.result=[],this.generator=function*(e,t){for(let r,s,n,i,l=!0,o=e,a=yield;;)r?(n+=o*(s-n),l?(n=G(n,i.low,a.low),r.high>s&&(s=r.high,o=G(o+e,t))):(n=X(n,i.high,a.high),r.low<s&&(s=r.low,o=G(o+e,t))),(l&&r.low<n||!l&&r.high>n)&&(o=e,n=s,l=!l,s=l?r.high:r.low)):(n=a.low,s=a.high),i=a,r&&(a=r),r=yield n}(e.step,e.max),this.generator.next(),r.forEach(((e,s)=>{var n=this.generator.next({high:t[s],low:r[s]});void 0!==n.value&&this.result.push(n.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}ye.calculate=m;class be extends re{constructor(e){super(e);let t=e.low,r=e.high,s=e.close,n=e.period,i=e.signalPeriod,l=this.format;if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,r=1,s=new Z(n,!0,!1),o=new Z(n,!1,!0),a=new se({period:i,values:[],format:e=>e});for(var u=yield;;){if(s.push(u.high),o.push(u.low),r<n){r++,u=yield;continue}let i=o.periodLow;e=(u.close-i)/(s.periodHigh-i)*100,e=isNaN(e)?0:e,t=a.nextValue(e),u=yield{k:l(e),d:void 0===t?void 0:l(t)}}}(),this.generator.next(),t.forEach(((e,n)=>{var i=this.generator.next({high:r[n],low:t[n],close:s[n]});void 0!==i.value&&this.result.push(i.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}be.calculate=x;class Pe extends re{constructor(e){super(e);let t=e.low,r=e.high,s=e.close,n=e.period,i=this.format;if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,r=1,s=new Z(n,!0,!1),l=new Z(n,!1,!0);var o=yield;for(let a;;)s.push(o.high),l.push(o.low),r<n?(r++,o=yield):(e=l.periodLow,t=s.periodHigh,a=i((t-o.close)/(t-e)*-100),o=yield a)}(),this.generator.next(),t.forEach(((e,n)=>{var i=this.generator.next({high:r[n],low:t[n],close:s[n]});void 0!==i.value&&this.result.push(i.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}Pe.calculate=I;class _e extends re{constructor(e){super(e);var t=e.high,r=e.low,s=e.close,n=e.volume;if(r.length!==t.length||t.length!==s.length||t.length!==n.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t=0;for(e=yield;;){let r=(e.close-e.low-(e.high-e.close))/(e.high-e.low);r=isNaN(r)?1:r,t+=r*e.volume,e=yield Math.round(t)}}(),this.generator.next(),t.forEach(((e,t)=>{var i={high:e,low:r[t],close:s[t],volume:n[t]},l=this.generator.next(i);null!=l.value&&this.result.push(l.value)}))}nextValue(e){return this.generator.next(e).value}}_e.calculate=y;class Ve extends re{constructor(e){super(e);var t=e.close,r=e.volume;this.result=[],this.generator=function*(){var e,t,r=0;for((e=yield).close&&"number"==typeof e.close&&(t=e.close,e=yield);;)t<e.close?r+=e.volume:e.close<t&&(r-=e.volume),t=e.close,e=yield r}(),this.generator.next(),t.forEach(((e,s)=>{let n={close:t[s],volume:r[s]},i=this.generator.next(n);null!=i.value&&this.result.push(i.value)}))}nextValue(e){return this.generator.next(e).value}}Ve.calculate=b;class Ce extends re{constructor(e){super(e);let t=e.values,r=e.period,s=this.format,n=new ne({period:r,values:[],format:e=>e}),i=new ne({period:r,values:[],format:e=>e}),l=new ne({period:r,values:[],format:e=>e}),o=new xe({period:1,values:[],format:e=>e});this.result=[],this.generator=function*(){for(let e=yield;;){let t=n.nextValue(e),r=t?i.nextValue(t):void 0,a=r?l.nextValue(r):void 0,u=a?o.nextValue(a):void 0;e=yield u?s(u):void 0}}(),this.generator.next(),t.forEach((e=>{let t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}Ce.calculate=P;class qe extends re{constructor(e){super(e);var t=e.close,r=e.volume,s=e.period||1;if(r.length!==t.length)throw"Inputs(volume, close) not of equal size";let n=new ne({values:[],period:s});this.result=[],this.generator=function*(){var e=yield,t=yield;for(let r;;)r=(t.close-e.close)*t.volume,e=t,t=yield n.nextValue(r)}(),this.generator.next(),r.forEach(((e,s)=>{var n=this.generator.next({close:t[s],volume:r[s]});null!=n.value&&this.result.push(n.value)}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}qe.calculate=_;class Ee extends re{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.period,i=(this.format,new Z(n)),l=new se({period:n,values:[],format:e=>e});if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e=yield;;){let t=(e.high+e.low+e.close)/3;i.push(t);let r,s=l.nextValue(t),o=null,a=0;if(null!=s){for(let e of i.iterator())a+=J(e-s);o=a/n,r=(t-s)/(.015*o)}e=yield r}}(),this.generator.next(),t.forEach(((e,n)=>{var i=this.generator.next({high:r[n],low:t[n],close:s[n]});null!=i.value&&this.result.push(i.value)}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}Ee.calculate=V;class ke extends re{constructor(e){super(e);var t=e.high,r=e.low,s=e.fastPeriod,n=e.slowPeriod,i=new se({values:[],period:n}),l=new se({values:[],period:s});this.result=[],this.generator=function*(){var e,t,r,s,n;for(t=yield;;)r=(t.high+t.low)/2,s=i.nextValue(r),n=l.nextValue(r),void 0!==s&&void 0!==n&&(e=n-s),t=yield e}(),this.generator.next(),t.forEach(((e,t)=>{var s={high:e,low:r[t]},n=this.generator.next(s);null!=n.value&&this.result.push(this.format(n.value))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}ke.calculate=C;class Se extends re{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.volume;this.format;if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){var e=yield;for(let t=0,r=0;;){let s=(e.high+e.low+e.close)/3;t+=e.volume*s,r+=e.volume,e=yield t/r}}(),this.generator.next(),t.forEach(((e,i)=>{var l=this.generator.next({high:r[i],low:t[i],close:s[i],volume:n[i]});null!=l.value&&this.result.push(l.value)}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}Se.calculate=q;class Ae extends re{constructor(e){super(e);var t=e.high,r=e.low,s=e.close,n=e.open,i=e.volume,l=e.noOfBars;if(r.length!==t.length||t.length!==s.length||t.length!==i.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[];var o=X(...t,...r,...s,...n),a=G(...t,...r,...s,...n),u=a;for(let e=0;e<l;e++){let e=u,h=e+(o-a)/l;u=h;let c=0,v=0,d=0;for(let l=0;l<t.length;l++){let o=r[l],a=t[l],u=n[l],p=s[l],g=i[l];E(e,h,o,a)&&(d+=g,u>p?v+=g:c+=g)}this.result.push({rangeStart:e,rangeEnd:h,bullishVolume:c,bearishVolume:v,totalVolume:d})}}nextValue(){throw"Next value not supported for volume profile"}}Ae.calculate=k;class Be extends re{constructor(e){super(e),this.result=[],this.generator=function*(){for(let e=yield;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({high:e.high[r],low:e.low[r],close:e.close[r]});this.result.push(s.value)}))}nextValue(e){return this.generator.next(e).value}}Be.calculate=function(e){re.reverseInputs(e);var t=new Be(e).result;return e.reversedInput&&t.reverse(),re.reverseInputs(e),t};class He extends re{constructor(e){super(e);var t=e.high,r=e.low,s=e.close,n=e.volume,i=e.period,l=new Be({low:[],high:[],close:[]}),o=new Z(i,!1,!1,!0),a=new Z(i,!1,!1,!0);if(r.length!==t.length||t.length!==s.length||t.length!==n.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t,r,s,n=0;let u=null,h=null;for((t=yield).close,t=yield;;){var{high:c,low:v,close:d,volume:p}=t,g=0,w=0;u=l.nextValue({high:c,low:v,close:d}),n=u*p,null!=u&&null!=h&&(u>h?g=n:w=n,o.push(g),a.push(w),r=o.periodSum,s=a.periodSum,o.totalPushed>=i&&o.totalPushed>=i&&(e=100-100/(1+r/s))),h=u,t=yield e}}(),this.generator.next(),t.forEach(((e,t)=>{var i={high:e,low:r[t],close:s[t],volume:n[t]},l=this.generator.next(i);null!=l.value&&this.result.push(parseFloat(l.value.toFixed(2)))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return parseFloat(t.value.toFixed(2))}}He.calculate=S;class ze extends re{constructor(e){super(e);let t=e.values,r=e.rsiPeriod,s=e.stochasticPeriod,n=e.kPeriod,i=e.dPeriod;this.format;this.result=[],this.generator=function*(){let e,t,l,o,a=new he({period:r,values:[]}),u=new be({period:s,high:[],low:[],close:[],signalPeriod:n}),h=new se({period:i,values:[],format:e=>e});for(var c=yield;;){if(e=a.nextValue(c),void 0!==e){var v={high:e,low:e,close:e};t=u.nextValue(v),void 0!==t&&void 0!==t.d&&(l=h.nextValue(t.d),void 0!==l&&(o={stochRSI:t.k,k:t.d,d:l}))}c=yield o}}(),this.generator.next(),t.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}ze.calculate=A;class Le extends re{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var s=new Z(r,!0,!1,!1);this.generator=function*(){var e,t;for(e=yield;;)s.push(e),s.totalPushed>=r&&(t=s.periodHigh),e=yield t}(),this.generator.next(),t.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}Le.calculate=B;class Me extends re{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var s=new Z(r,!1,!0,!1);this.generator=function*(){var e,t;for(e=yield;;)s.push(e),s.totalPushed>=r&&(t=s.periodLow),e=yield t}(),this.generator.next(),t.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}Me.calculate=H;class Te extends re{constructor(e){super(e);var t=e.values,r=e.period;this.result=[];var s=new Z(r,!1,!1,!0);this.generator=function*(){var e,t;for(e=yield;;)s.push(e),s.totalPushed>=r&&(t=s.periodSum),e=yield t}(),this.generator.next(),t.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}Te.calculate=z;class De extends re{constructor(e){super(e),this.format;let t=e.useATR,r=e.brickSize||0;if(t){let t=g(Object.assign({},e));r=t[t.length-1]}if(this.result=new $,0===r)return void console.error("Not enough data to calculate brickSize for renko when using ATR");let s=0,n=0,i=1/0,l=0,o=0,a=0;this.generator=function*(){for(let e=yield;;){if(0==s){s=e.close,n=e.high,i=e.low,l=e.close,o=e.volume,a=e.timestamp,e=yield;continue}let t=J(e.close-l),u=J(e.close-s);if(t>=r&&u>=r){let a=t>u?s:l,h={open:a,high:n>e.high?n:e.high,low:i<e.Low?i:e.low,close:a>e.close?a-r:a+r,volume:o+e.volume,timestamp:e.timestamp};s=h.open,n=h.close,i=h.close,l=h.close,o=0,e=yield h}else n=n>e.high?n:e.high,i=i<e.Low?i:e.low,o+=e.volume,a=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume[r],timestamp:e.timestamp[r]});s.value&&(this.result.open.push(s.value.open),this.result.high.push(s.value.high),this.result.low.push(s.value.low),this.result.close.push(s.value.close),this.result.volume.push(s.value.volume),this.result.timestamp.push(s.value.timestamp))}))}nextValue(){return console.error("Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method"),null}}De.calculate=L;class je extends re{constructor(e){super(e),this.format,this.result=new $;let t=null,r=0,s=1/0,n=0,i=0,l=0;this.generator=function*(){for(let e=yield,o=null;;){if(null==t)t=(e.close+e.open)/2,r=e.high,s=e.low,n=(e.close+e.open+e.high+e.low)/4,i=e.volume||0,l=e.timestamp||0,o={open:t,high:r,low:s,close:n,volume:e.volume||0,timestamp:e.timestamp||0};else{let i=(e.close+e.open+e.high+e.low)/4,l=(t+n)/2,a=X(l,i,e.high),u=G(e.low,l,i);o={close:i,open:l,high:a,low:u,volume:e.volume||0,timestamp:e.timestamp||0},n=i,t=l,r=a,s=u}e=yield o}}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume?e.volume[r]:e.volume,timestamp:e.timestamp?e.timestamp[r]:e.timestamp});s.value&&(this.result.open.push(s.value.open),this.result.high.push(s.value.high),this.result.low.push(s.value.low),this.result.close.push(s.value.close),this.result.volume.push(s.value.volume),this.result.timestamp.push(s.value.timestamp))}))}nextValue(e){return this.generator.next(e).value}}je.calculate=M;class Re{constructor(){}approximateEqual(e,t){return 1*parseFloat(J(e-t).toPrecision(4))<=1*parseFloat((.001*e).toPrecision(4))}logic(){throw"this has to be implemented"}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let t=this.logic;return this._generateDataForCandleStick(e).map(((e,r)=>t.call(this,e)?r:void 0)).filter((e=>e))}hasPattern(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),!1;return e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse()),this.logic.call(this,this._getLastDataForCandleStick(e))}_getLastDataForCandleStick(e){let t=this.requiredCount;if(e.close.length===t)return e;{let r={open:[],high:[],low:[],close:[]},s=0,n=e.close.length-t;for(;s<t;)r.open.push(e.open[n+s]),r.high.push(e.high[n+s]),r.low.push(e.low[n+s]),r.close.push(e.close[n+s]),s++;return r}}_generateDataForCandleStick(e){let t=this.requiredCount,r=e.close.map((function(r,s){let n=0,i={open:[],high:[],low:[],close:[]};for(;n<t;)i.open.push(e.open[s+n]),i.high.push(e.high[s+n]),i.low.push(e.low[s+n]),i.close.push(e.close[s+n]),n++;return i})).filter(((r,s)=>s<=e.close.length-t));return r}}class Fe extends Re{constructor(){super(),this.name="MorningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0]),n=(e.open[1],e.close[1]),i=e.high[1],l=e.low[1],o=e.open[2],a=e.close[2];e.high[2],e.low[2];return r<t&&s>l&&s>i&&i<s&&l<s&&o>i&&n<o&&o<a&&a>(t+r)/2}}class Ne extends Re{constructor(){super(),this.name="BullishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0],e.open[1]),n=e.close[1];e.high[1],e.low[1];return r<t&&t>s&&r>s&&t<n}}class Oe extends Re{constructor(){super(),this.requiredCount=2,this.name="BullishHarami"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1],l=e.high[1],o=e.low[1];return t>n&&r<n&&r<i&&t>o&&s>l}}class Ue extends Re{constructor(){super(),this.requiredCount=2,this.name="BullishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1],l=e.high[1],o=e.low[1],a=this.approximateEqual(n,i);return t>n&&r<n&&r<i&&t>o&&s>l&&a}}class We extends Re{constructor(){super(),this.name="Doji",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=this.approximateEqual(t,r),l=i&&this.approximateEqual(t,s),o=i&&this.approximateEqual(r,n);return i&&l==o}}class Ke extends Re{constructor(){super(),this.name="MorningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0]),n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],a=e.open[2],u=e.close[2],h=(e.high[2],e.low[2],(new We).hasPattern({open:[n],close:[i],high:[l],low:[o]}));return r<t&&h&&a<u&&l<s&&o<s&&a>l&&i<a&&u>(t+r)/2}}class Ge extends Re{constructor(){super(),this.requiredCount=3,this.name="DownsideTasukiGap"}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0]),n=e.open[1],i=e.close[1],l=e.high[1],o=(e.low[1],e.open[2]),a=e.close[2];e.high[2],e.low[2];return r<t&&i<n&&a>o&&l<s&&n>o&&i<o&&a>n&&a<r}}class Xe extends Re{constructor(){super(),this.name="BullishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0];return this.approximateEqual(r,s)&&this.approximateEqual(n,t)&&t<r&&t<s}}class Je extends Re{constructor(){super(),this.requiredCount=2,this.name="PiercingLine"}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0]),n=e.open[1],i=e.close[1];e.high[1];return e.low[1]<s&&r<t&&s>n&&i>(t+r)/2&&i>n}}class Qe extends Re{constructor(){super(),this.name="ThreeWhiteSoldiers",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1],l=e.high[1],o=(e.low[1],e.open[2]),a=e.close[2],u=e.high[2];e.low[2];return l>s&&u>l&&t<r&&n<i&&o<a&&r>n&&n<s&&l>o&&o<i}}class Ye extends Re{constructor(){super(),this.name="BullishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=r>t;return i=i&&this.approximateEqual(r,s),i=i&&r-t<=2*(t-n),i}}class Ze extends Re{constructor(){super(),this.name="BullishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=r>t;return i=i&&this.approximateEqual(t,n),i=i&&r-t<=2*(s-r),i}}class $e extends Re{constructor(){super(),this.name="BearishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=t>r;return i=i&&this.approximateEqual(t,s),i=i&&t-r<=2*(r-n),i}}class et extends Re{constructor(){super(),this.name="BearishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=t>r;return i=i&&this.approximateEqual(r,n),i=i&&t-r<=2*(s-t),i}}class tt extends Re{constructor(){super(),this.name="HammerPattern",this.requiredCount=5}logic(e){let t=this.downwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}downwardTrend(e,t=!0){let r=t?3:4,s=a({values:e.close.slice(0,r),period:r-1});return u({values:e.close.slice(0,r),period:r-1})>s}includesHammer(e,t=!0){let r=t?3:4,s=t?4:void 0,n={open:e.open.slice(r,s),close:e.close.slice(r,s),low:e.low.slice(r,s),high:e.high.slice(r,s)},i=j(n);return i=i||R(n),i=i||T(n),i=i||D(n),i}hasConfirmation(e){e.open[3];let t=e.close[3],r=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return r<s&&t<s}}class rt extends tt{constructor(){super(),this.name="HammerPatternUnconfirmed"}logic(e){let t=this.downwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}class st extends Re{constructor(){super(),this.name="TweezerBottom",this.requiredCount=5}logic(e){return this.downwardTrend(e)&&e.low[3]==e.low[4]}downwardTrend(e){let t=a({values:e.close.slice(0,3),period:2});return u({values:e.close.slice(0,3),period:2})>t}}let nt=[new Ne,new Ge,new Oe,new Ue,new Ke,new Fe,new Xe,new Je,new Qe,new Ye,new Ze,new tt,new rt,new st];class it extends Re{constructor(){super(),this.name="Bullish Candlesticks"}hasPattern(e){return nt.reduce((function(t,r){let s=r.hasPattern(e);return t||s}),!1)}}class lt extends Re{constructor(){super(),this.name="BearishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0],e.open[1]),n=e.close[1];e.high[1],e.low[1];return r>t&&t<s&&r<s&&t>n}}class ot extends Re{constructor(){super(),this.requiredCount=2,this.name="BearishHarami"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1],l=e.high[1],o=e.low[1];return t<n&&r>n&&r>i&&t<o&&s>l}}class at extends Re{constructor(){super(),this.requiredCount=2,this.name="BearishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1],l=e.high[1],o=e.low[1],a=this.approximateEqual(n,i);return t<n&&r>n&&r>i&&t<o&&s>l&&a}}class ut extends Re{constructor(){super(),this.name="EveningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1],l=e.high[1],o=e.low[1],a=e.open[2],u=e.close[2],h=(e.high[2],e.low[2],(new We).hasPattern({open:[n],close:[i],high:[l],low:[o]}));return r>t&&h&&l>s&&o>s&&a<o&&i>a&&a>u&&u<(t+r)/2}}class ht extends Re{constructor(){super(),this.name="EveningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1],e.close[1]),i=e.high[1],l=e.low[1],o=e.open[2],a=e.close[2];e.high[2],e.low[2];return r>t&&s<l&&s<i&&i>s&&l>s&&o<l&&n>o&&o>a&&a<(t+r)/2}}class ct extends Re{constructor(){super(),this.name="BearishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0];return this.approximateEqual(t,s)&&this.approximateEqual(n,r)&&t>r&&t>n}}class vt extends Re{constructor(){super(),this.name="ThreeBlackCrows",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0]),n=e.open[1],i=e.close[1],l=(e.high[1],e.low[1]),o=e.open[2],a=e.close[2],u=(e.high[2],e.low[2]);return s>l&&l>u&&t>r&&n>i&&o>a&&t>n&&n>r&&n>o&&o>i}}class dt extends Re{constructor(){super(),this.name="HangingMan",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return a({values:e.close.slice(0,r),period:r-1})>u({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,s=t?4:void 0,n={open:e.open.slice(r,s),close:e.close.slice(r,s),low:e.low.slice(r,s),high:e.high.slice(r,s)},i=j(n);return i=i||T(n),i}hasConfirmation(e){e.open[3];let t=e.close[3],r=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return r>s&&t>s}}class pt extends dt{constructor(){super(),this.name="HangingManUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}class gt extends Re{constructor(){super(),this.name="ShootingStar",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return a({values:e.close.slice(0,r),period:r-1})>u({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,s=t?4:void 0,n={open:e.open.slice(r,s),close:e.close.slice(r,s),low:e.low.slice(r,s),high:e.high.slice(r,s)},i=R(n);return i=i||D(n),i}hasConfirmation(e){e.open[3];let t=e.close[3],r=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return r>s&&t>s}}class wt extends gt{constructor(){super(),this.name="ShootingStarUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}class ft extends Re{constructor(){super(),this.name="TweezerTop",this.requiredCount=5}logic(e){return this.upwardTrend(e)&&e.high[3]==e.high[4]}upwardTrend(e){return a({values:e.close.slice(0,3),period:2})>u({values:e.close.slice(0,3),period:2})}}let mt=[new lt,new ot,new at,new ut,new ht,new ct,new vt,new $e,new et,new dt,new pt,new gt,new wt,new ft];class xt extends Re{constructor(){super(),this.name="Bearish Candlesticks"}hasPattern(e){return mt.reduce((function(t,r){return t||r.hasPattern(e)}),!1)}}class It extends Re{constructor(){super(),this.name="AbandonedBaby",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=(e.high[0],e.low[0]),n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],a=e.open[2],u=e.close[2],h=e.high[2],c=e.low[2],v=(new We).hasPattern({open:[n],close:[i],high:[l],low:[o]});return r<t&&v&&l<s&&c>l&&u>a&&h<t}}class yt extends Re{constructor(){super(),this.name="DarkCloudCover",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=(e.low[0],e.open[1]),i=e.close[1];e.high[1],e.low[1];return r>t&&i<n&&n>s&&i<(r+t)/2&&i>t}}class bt extends Re{constructor(){super(),this.requiredCount=1,this.name="DragonFlyDoji"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=this.approximateEqual(t,r),l=i&&this.approximateEqual(t,s),o=i&&this.approximateEqual(r,n);return i&&l&&!o}}class Pt extends Re{constructor(){super(),this.requiredCount=1,this.name="GraveStoneDoji"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=this.approximateEqual(t,r),l=i&&this.approximateEqual(t,s),o=i&&this.approximateEqual(r,n);return i&&o&&!l}}class _t extends Re{constructor(){super(),this.name="BullishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=J(r-t),l=J(s-r),o=J(t-n);return i<l&&i<o}}class Vt extends Re{constructor(){super(),this.name="BearishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=J(r-t),l=J(s-t),o=J(s-n);return i<l&&i<o}}class Ct extends re{constructor(e){super(e),this.result=[];var t=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),r=new Z(2*t.conversionPeriod,!0,!0,!1),s=new Z(2*t.basePeriod,!0,!0,!1),n=new Z(2*t.spanPeriod,!0,!0,!1);this.generator=function*(){let e,i,l=X(t.conversionPeriod,t.basePeriod,t.spanPeriod,t.displacement),o=1;for(i=yield;;){if(r.push(i.high),r.push(i.low),s.push(i.high),s.push(i.low),n.push(i.high),n.push(i.low),o<l)o++;else{let t=(r.periodHigh+r.periodLow)/2,i=(s.periodHigh+s.periodLow)/2;e={conversion:t,base:i,spanA:(t+i)/2,spanB:(n.periodHigh+n.periodLow)/2}}i=yield e}}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({high:e.high[r],low:e.low[r]});s.value&&this.result.push(s.value)}))}nextValue(e){return this.generator.next(e).value}}Ct.calculate=F;class qt extends re{constructor(e){super(e);var t,r=new(e.useSMA?se:ne)({period:e.maPeriod,values:[],format:e=>e}),s=new me({period:e.atrPeriod,high:[],low:[],close:[],format:e=>e});this.result=[],this.generator=function*(){var n;for(t=yield;;){var{close:i}=t,l=r.nextValue(i),o=s.nextValue(t);null!=l&&null!=o&&(n={middle:l,upper:l+e.multiplier*o,lower:l-e.multiplier*o}),t=yield n}}(),this.generator.next(),e.high.forEach(((t,r)=>{var s={high:t,low:e.low[r],close:e.close[r]},n=this.generator.next(s);null!=n.value&&this.result.push(n.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}qt.calculate=N;class Et extends re{constructor(e){super(e);var t=e.high,r=e.low,s=e.close;this.result=[];var n=new me({period:e.period,high:[],low:[],close:[],format:e=>e}),i=new Z(2*e.period,!0,!0,!1);this.generator=function*(){for(var t,r,s=yield;;){var{high:l,low:o}=s;i.push(l),i.push(o),r=n.nextValue(s),i.totalPushed>=2*e.period&&null!=r&&(t={exitLong:i.periodHigh-r*e.multiplier,exitShort:i.periodLow+r*e.multiplier}),s=yield t}}(),this.generator.next(),t.forEach(((e,t)=>{var n={high:e,low:r[t],close:s[t]},i=this.generator.next(n);null!=i.value&&this.result.push(i.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}Et.calculate=O;class kt extends re{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,s=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),s=e.valueA>e.valueB;for(var n=1;1==s&&t[n]>=r[n];)t[n]>r[n]?s=!1:t[n]<r[n]?s=!0:t[n]===r[n]&&(n+=1);1==s&&(t=[e.valueA],r=[e.valueB]),e=yield s}}(),this.generator.next(),this.result=[],this.lineA.forEach(((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)}))}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}kt.calculate=U;class St extends re{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,s=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),s=e.valueA<e.valueB;for(var n=1;1==s&&t[n]<=r[n];)t[n]<r[n]?s=!1:t[n]>r[n]?s=!0:t[n]===r[n]&&(n+=1);1==s&&(t=[e.valueA],r=[e.valueB]),e=yield s}}(),this.generator.next(),this.result=[],this.lineA.forEach(((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)}))}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}St.calculate=W;let At=["sma","ema","wma","wema","macd","rsi","bollingerbands","adx","atr","truerange","roc","kst","psar","stochastic","williamsr","adl","obv","trix","cci","awesomeoscillator","forceindex","vwap","volumeprofile","renko","heikinashi","stochasticrsi","mfi","averagegain","averageloss","highest","lowest","sum","FixedSizeLinkedList","sd","bullish","bearish","abandonedbaby","doji","bearishengulfingpattern","bullishengulfingpattern","darkcloudcover","downsidetasukigap","dragonflydoji","gravestonedoji","bullishharami","bearishharami","bullishharamicross","bearishharamicross","eveningdojistar","eveningstar","morningdojistar","morningstar","bullishmarubozu","bearishmarubozu","piercingline","bullishspinningtop","bearishspinningtop","threeblackcrows","threewhitesoldiers","bullishhammerstick","bearishhammerstick","bullishinvertedhammerstick","bearishinvertedhammerstick","hammerpattern","hammerpatternunconfirmed","hangingman","hangingmanunconfirmed","shootingstar","shootingstarunconfirmed","tweezertop","tweezerbottom","ichimokucloud","keltnerchannels","chandelierexit","crossup","crossdown","crossover"];e.getAvailableIndicators=K,e.AvailableIndicators=At,e.FixedSizeLinkedList=Z,e.CandleData=class{},e.CandleList=$,e.sma=s,e.SMA=se,e.ema=n,e.EMA=ne,e.wma=i,e.WMA=ie,e.wema=l,e.WEMA=le,e.macd=o,e.MACD=oe,e.rsi=h,e.RSI=he,e.bollingerbands=v,e.BollingerBands=ve,e.adx=p,e.ADX=fe,e.atr=g,e.ATR=me,e.truerange=d,e.TrueRange=we,e.roc=w,e.ROC=xe,e.kst=f,e.KST=Ie,e.psar=m,e.PSAR=ye,e.stochastic=x,e.Stochastic=be,e.williamsr=I,e.WilliamsR=Pe,e.adl=y,e.ADL=_e,e.obv=b,e.OBV=Ve,e.trix=P,e.TRIX=Ce,e.forceindex=_,e.ForceIndex=qe,e.cci=V,e.CCI=Ee,e.awesomeoscillator=C,e.AwesomeOscillator=ke,e.vwap=q,e.VWAP=Se,e.volumeprofile=k,e.VolumeProfile=Ae,e.mfi=S,e.MFI=He,e.stochasticrsi=A,e.StochasticRSI=ze,e.averagegain=a,e.AverageGain=ae,e.averageloss=u,e.AverageLoss=ue,e.sd=c,e.SD=ce,e.highest=B,e.Highest=Le,e.lowest=H,e.Lowest=Me,e.sum=z,e.Sum=Te,e.renko=L,e.HeikinAshi=je,e.heikinashi=M,e.bullish=function(e){return(new it).hasPattern(e)},e.bearish=function(e){return(new xt).hasPattern(e)},e.abandonedbaby=function(e){return(new It).hasPattern(e)},e.doji=function(e){return(new We).hasPattern(e)},e.bearishengulfingpattern=function(e){return(new lt).hasPattern(e)},e.bullishengulfingpattern=function(e){return(new Ne).hasPattern(e)},e.darkcloudcover=function(e){return(new yt).hasPattern(e)},e.downsidetasukigap=function(e){return(new Ge).hasPattern(e)},e.dragonflydoji=function(e){return(new bt).hasPattern(e)},e.gravestonedoji=function(e){return(new Pt).hasPattern(e)},e.bullishharami=function(e){return(new Oe).hasPattern(e)},e.bearishharami=function(e){return(new ot).hasPattern(e)},e.bullishharamicross=function(e){return(new Ue).hasPattern(e)},e.bearishharamicross=function(e){return(new at).hasPattern(e)},e.eveningdojistar=function(e){return(new ut).hasPattern(e)},e.eveningstar=function(e){return(new ht).hasPattern(e)},e.morningdojistar=function(e){return(new Ke).hasPattern(e)},e.morningstar=function(e){return(new Fe).hasPattern(e)},e.bullishmarubozu=function(e){return(new Xe).hasPattern(e)},e.bearishmarubozu=function(e){return(new ct).hasPattern(e)},e.piercingline=function(e){return(new Je).hasPattern(e)},e.bullishspinningtop=function(e){return(new _t).hasPattern(e)},e.bearishspinningtop=function(e){return(new Vt).hasPattern(e)},e.threeblackcrows=function(e){return(new vt).hasPattern(e)},e.threewhitesoldiers=function(e){return(new Qe).hasPattern(e)},e.bullishhammerstick=T,e.bearishhammerstick=j,e.bullishinvertedhammerstick=D,e.bearishinvertedhammerstick=R,e.hammerpattern=function(e){return(new tt).hasPattern(e)},e.hammerpatternunconfirmed=function(e){return(new rt).hasPattern(e)},e.hangingman=function(e){return(new dt).hasPattern(e)},e.hangingmanunconfirmed=function(e){return(new pt).hasPattern(e)},e.shootingstar=function(e){return(new gt).hasPattern(e)},e.shootingstarunconfirmed=function(e){return(new wt).hasPattern(e)},e.tweezertop=function(e){return(new ft).hasPattern(e)},e.tweezerbottom=function(e){return(new st).hasPattern(e)},e.fibonacciretracement=function(e,t){let r,s=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6];return r=e<t?s.map((function(r){let s=t-J(e-t)*r/100;return 0<s?s:0})):s.map((function(r){let s=t+J(e-t)*r/100;return 0<s?s:0})),r},e.ichimokucloud=F,e.IchimokuCloud=Ct,e.keltnerchannels=N,e.KeltnerChannels=qt,e.KeltnerChannelsInput=class extends te{constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}},e.KeltnerChannelsOutput=class extends te{},e.chandelierexit=O,e.ChandelierExit=Et,e.ChandelierExitInput=class extends te{constructor(){super(...arguments),this.period=22,this.multiplier=3}},e.ChandelierExitOutput=class extends te{},e.crossUp=U,e.CrossUp=kt,e.crossDown=W,e.CrossDown=St,e.setConfig=function(e,t){ee[e]=t},e.getConfig=t}(window.indicator=window.indicator||{});